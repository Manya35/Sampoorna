<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Upload FRA Claim Form</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/4d6b3f02d1.js" crossorigin="anonymous"></script>
</head>
<body class="min-h-screen bg-green-700 flex items-center justify-center p-6 font-sans">

  <div class="bg-white p-8 rounded-3xl shadow-2xl border border-green-600 w-full max-w-2xl">
    
    <!-- Header -->
    <div class="text-center mb-6">
      <h2 class="text-3xl font-bold text-green-700">Upload FRA Claim Form</h2>
      <p class="text-gray-600 mt-2">Select the form type, then upload your document.</p>
    </div>

    <!-- Step 1: Select Form -->
    <div class="mb-6">
      <label class="block text-green-800 font-semibold mb-2">Which form are you uploading?</label>
      <select id="form-select" class="w-full p-3 border border-green-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
        <option value="">-- Select a Form --</option>
        <option value="formA">ðŸ“„ Form A â€“ Individual Claim</option>
        <option value="formB">ðŸ‘¥ Form B â€“ Community Rights</option>
        <option value="formC">ðŸŒ³ Form C â€“ Community Forest Resource</option>
      </select>
    </div>

    <!-- Step 2: Upload File (hidden until form selected) -->
    <div id="upload-section" class="hidden">
      <label for="file-upload"
        class="flex items-center justify-center w-full p-4 border-2 border-dashed border-green-500 rounded-lg cursor-pointer bg-green-50 hover:bg-green-100 transition-colors duration-300 text-green-700 font-semibold text-lg mb-4">
        <i class="fas fa-file-pdf mr-3 text-red-500"></i>
        <span id="file-label">Choose PDF File</span>
        <input id="file-upload" type="file" accept="application/pdf" class="hidden" />
      </label>

      <div id="message-box" class="hidden mb-4 p-3 rounded-lg text-center font-medium"></div>

      <!-- Extract Data Button -->
      <button id="extract-btn" disabled
        class="w-full py-3 rounded-xl font-bold text-lg bg-green-300 text-green-900 cursor-not-allowed flex items-center justify-center gap-2">
        <i class="fas fa-database"></i>
        <span>Extract Data</span>
      </button>
    </div>

  </div>

  <script>
    const formSelect = document.getElementById('form-select');
    const uploadSection = document.getElementById('upload-section');
    const fileInput = document.getElementById('file-upload');
    const fileLabel = document.getElementById('file-label');
    const extractBtn = document.getElementById('extract-btn');
    const messageBox = document.getElementById('message-box');

    let selectedFile = null;

    // Show upload section after form is chosen
    formSelect.addEventListener('change', () => {
      if (formSelect.value) {
        uploadSection.classList.remove('hidden');
      } else {
        uploadSection.classList.add('hidden');
      }
    });

    // File change handler
    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file && file.type === 'application/pdf') {
        selectedFile = file;
        fileLabel.textContent = file.name;
        showMessage(`Selected: ${file.name}`, 'info');
        enableExtractBtn();
      } else {
        selectedFile = null;
        fileLabel.textContent = 'Choose PDF File';
        showMessage('Please select a PDF file.', 'error');
        disableExtractBtn();
      }
    });

    // Extract Data button click
    extractBtn.addEventListener('click', () => {
      if (!selectedFile) return;

      extractBtn.disabled = true;
      extractBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>Processing...</span>';
      extractBtn.className = "w-full py-3 rounded-xl font-bold text-lg bg-green-500 text-white cursor-wait flex items-center justify-center gap-2";

      // Simulate redirect to extractData page
      setTimeout(() => {
        window.location.href = "extractData.html";
      }, 2500);
    });

    function showMessage(msg, type) {
      messageBox.textContent = msg;
      messageBox.classList.remove('hidden');
      messageBox.className = 'mb-4 p-3 rounded-lg text-center font-medium ' +
        (type === 'error' ? 'bg-red-100 text-red-700 border border-red-300'
          : 'bg-green-100 text-green-700 border border-green-300');
    }

    function enableExtractBtn() {
      extractBtn.disabled = false;
      extractBtn.innerHTML = '<i class="fas fa-database"></i><span>Extract Data</span>';
      extractBtn.className = "w-full py-3 rounded-xl font-bold text-lg bg-green-600 text-white shadow hover:bg-green-700 flex items-center justify-center gap-2";
    }

    function disableExtractBtn() {
      extractBtn.disabled = true;
      extractBtn.innerHTML = '<i class="fas fa-database"></i><span>Extract Data</span>';
      extractBtn.className = "w-full py-3 rounded-xl font-bold text-lg bg-green-300 text-green-900 cursor-not-allowed flex items-center justify-center gap-2";
    }
  </script>

</body>
</html>
